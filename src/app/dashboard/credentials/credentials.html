<div class="flex gap-4 items-center justify-between">
  <div class="flex items-center gap-4 text-text">
    <h1 class="font-semibold text-lg">Credentials</h1>
    <button
      (click)="toggleAddModal()"
      class="bg-primary py-1 rounded-md text-container h-8 px-6 text-sm hover:cursor-pointer"
    >
      Add Credential
    </button>
    <button
      disabled
      class="bg-primary py-1 rounded-md text-container h-8 px-6 text-sm hover:cursor-pointer"
    >
      Import Credentials
    </button>
    <button
      class="bg-primary py-1 rounded-md text-container h-8 px-6 text-sm hover:cursor-pointer"
    >
      Export Credentials (Excel)
    </button>
  </div>

  <div>
    <button
      class="flex items-center gap-4 justify-between bg-primary py-1 rounded-md text-container h-8 px-3 text-sm hover:cursor-pointer"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-list-filter-icon lucide-list-filter"
      >
        <path d="M3 6h18" />
        <path d="M7 12h10" />
        <path d="M10 18h4" />
      </svg>
      Filter
    </button>
  </div>
</div>

<div class="overflow-hidden">
  <app-credential-table
    (deleteCredential)="deleteCredential($event)"
    [credentialsData]="credentials()"
  />
</div>

@if(isAddCredential()) {
<app-modal (backdropClick)="toggleAddModal()">
  <div class="w-[50vw] space-y-4 rounded-md bg-white p-5">
    <div class="flex items-center justify-between">
      <p class="text-lg font-bold">Add Credential</p>
      <button type="button" (click)="toggleAddModal()">
        <svg
          width="37"
          height="36"
          viewBox="0 0 37 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="18.5" cy="18" r="18" fill="#262449" fill-opacity="0.2" />
          <path
            d="M24.7821 12.4329C24.6062 12.2566 24.3675 12.1576 24.1185 12.1576C23.8696 12.1576 23.6308 12.2566 23.455 12.4329L18.8527 17.0258L14.2503 12.4235C14.0745 12.2472 13.8357 12.1482 13.5868 12.1482C13.3378 12.1482 13.0991 12.2472 12.9232 12.4235C12.5562 12.7905 12.5562 13.3835 12.9232 13.7505L17.5256 18.3529L12.9232 22.9552C12.5562 23.3223 12.5562 23.9152 12.9232 24.2823C13.2903 24.6494 13.8832 24.6494 14.2503 24.2823L18.8527 19.6799L23.455 24.2823C23.8221 24.6494 24.415 24.6494 24.7821 24.2823C25.1491 23.9152 25.1491 23.3223 24.7821 22.9552L20.1797 18.3529L24.7821 13.7505C25.1397 13.3929 25.1397 12.7905 24.7821 12.4329Z"
            fill="#262449"
          />
        </svg>
      </button>
    </div>

    <div>
      <form [formGroup]="credentialForm" class="space-y-8 w-full">
        <label
          for="siteName"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <input
            id="siteName"
            type="text"
            placeholder="Site Name"
            formControlName="site_name"
            class="w-full py-2 outline-none"
          />
        </label>
        <label
          for="userName"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <input
            id="userName"
            type="text"
            placeholder="User Name"
            formControlName="username"
            class="w-full py-2 outline-none"
          />
        </label>

        <label
          for="pwd"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <input
            formControlName="password"
            id="pwd"
            [type]="passwordFieldType()"
            placeholder="Password"
            type="password"
            class="w-full py-2 outline-none"
          />
          <svg
            (click)="togglePasswordVisibility()"
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="lucide lucide-eye-icon lucide-eye"
          >
            @if(passwordFieldType() === "password") {
            <path
              d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"
            />
            <path d="M14.084 14.158a3 3 0 0 1-4.242-4.242" />
            <path
              d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"
            />
            <path d="m2 2 20 20" />
            } @else {
            <path
              d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"
            />
            <circle cx="12" cy="12" r="3" />
            }
          </svg>
        </label>

        <label
          for="loginUrl"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <input
            id="loginUrl"
            type="url"
            placeholder="Login Url"
            formControlName="login_url"
            class="w-full py-2 outline-none"
          />
        </label>

        <label
          for="notes"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <input
            id="notes"
            type="text"
            placeholder="Notes"
            formControlName="notes"
            class="w-full py-2 outline-none"
          />
        </label>

        <label
          for="category"
          class="flex justify-between items-center w-full border-b px-2"
        >
          <select
            id="category"
            formControlName="category"
            class="w-full py-2 outline-none bg-transparent"
          >
            <option value="" disabled selected>Select category</option>
            @for (cat of categories(); track $index) {
            <option [value]="cat.name">
              {{ cat.name }}
            </option>
            }
          </select>
        </label>

        <div class="flex w-full justify-between items-center text-primary">
          <button
            (click)="submitCreateCredentials()"
            class="bg-primary py-1 rounded-2xl text-container h-8 px-6 text-sm"
          >
            Add
          </button>
        </div>
      </form>
    </div>
  </div>
</app-modal>
}
